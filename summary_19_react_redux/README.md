## Практическое занятие №19

### Тема: React Redux.

Репозитарий содержит материалы по практическому занятию №19, посвященному работе с библиотекой React Redux.

### Цели занятия
- закрепление знаний, полученных на лекции;
- разбор практических примеров;
- практическое применение полученных знаний.

### Задачи занятия
1. Добавляем работу с состоянием в наше приложение. Сначала поработаем с пристрелочной задачей.  Нужно добавить поддержку тем в наше приложение. Будет 2 темы, темная и светлая (`dark`, `light`).
 - создаем редакс-стейт приложения.
 - создаем экшн для смены темы. Он просто должен создавать объект-экшн с типом `THEME/ACTION_CHANGE_THEME`.
 - создаем редьюсер. Начальное состояние - объект, у которого есть свойство `theme`, по умолчанию - `light`. При наступлении экшна `THEME/ACTION_CHANGE_THEME`, нужно менять тему на противоположную.
 - в `App.js`, в nav, добавляем кнопку "Смена темы". Используем наш компонент `Button`. На клик добавляем обработчик - нужно диспатчить экшн изменения темы.
 - и осталось только подписать некоторые компоненты на изменение темы. Пока ограничимся кнопками. Нужно в компоненте `Button` брать из редакс-стейта текущую тему, и добавлять соответствующий класс (`button_light`, `button_dark`) для кнопки. Классы уже созданы.
2. Теперь усложним наш стейт. У нас есть форма регистрации пользователей - пришла пора ее оживить. Нужно хранить в редакс-стейте список пользователей, и добавить возможность управления им со страницы. В стейте будет свойство `userList` - по умолчанию пустой массив.
 - создаем экшны для управления пользователями: добавить и удалить пользователя (`USERS/ADD_USER`, `USERS/REMOVE_USER`). Первый экшн будет принимать логин, пароль, имя пользователя и емейл, и добавлять пользователя в список. Второй экшн будет принимать на вход порядковый номер пользователя, и удалять его из стейта (т.е. удалять N-й элемент из массива).
 - на страницу регистрации, добавляем отрисовку списка пользователей. Рендерим их в виде параграфов, которые содержат логин и емейл пользователя. При клике на такой параграф, диспатчим экшн удаления пользователя.
 - при клике на кнопку "Зарегистрироваться", диспатчим экшн удаления пользователя.
3. И теперь еще усложним наш стейт, теперь мы хотим хранить в стейте список постов, который мы запрашиваем с бэка. Создаем редьюсер. Здесь, кроме массива постов, нужно хранить еще флаг `isFetching` (идет ли загрузка), и `error` - сюда запишем текст ошибки, если таковая приключится при загрузке. Определяем экшны. Пока что мы работаем только с синхронными экшнами, поэтому у нас будут экшны "началась загрузка", "загрузка успешно завершена", "при загрузке произошла ошибка", то есть `POSTS/REQUEST_POSTS`, `POSTS/RESPONSE_RECEIVED`, `POSTS/REQUEST_ERROR`.
 - при монтировании компонента `App.js`, диспатчим экшн начала загрузки, и делаем `fetch`-запрос списка постов. Когда он завершится - нужно задиспатчить экшн, который положит в редакс-стейт результат запроса. Если что-то не так - то диспатчим экшн ошибки.
 - теперь осталось подписать компонент `Feed.jsx` на эту часть стейта. Если у нас идет загрузка списка постов - показываем текст "Идет загрузка". Если посты загружены успешно, т.е. в стейте `error` пустой - то показываем список постов. А если есть ошибка - то показываем текст ошибки.

### Полезные ссылки по занятию:
 - [React Redux](https://ru.react-redux.js.org/introduction/getting-started) - официальная русскоязычная(!) документация. О качестве перевода лучше не задумываться - чем богаты. Рекомендуется в качестве справочника. Есть очень толковые примеры.
 - [Описание React-Redux](https://medium.com/swlh/react-redux-hooks-5e5dbb52d057) - англоязычное, но рекомендуется к прочтению. Немало полезной информации о хуках, о том, как это работает "под капотом". Также там упоминается "старый" редакс, без хуков (`connect`). Имеет смысл ознакомиться - на собесах попадается.
 - [О работе редакс под капотом](https://ivaneroshkin.medium.com/%D0%BA%D0%B0%D0%BA-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82-redux-a967d8616398) - это для глубокого понимания, как работает редакс, и для демонстрации того, что он НЕ зависит от реакта, и может использоваться в plain JS code.